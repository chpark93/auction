# κ²½λ§¤ μ‹μ¤ν… ν”„λ΅ νΈμ—”λ“ ν΄λΌμ΄μ–ΈνΈ

λ°±μ—”λ“ MSA APIλ¥Ό ν…μ¤νΈν•κ³  μ‹μ—°ν•  μ μλ” HTML κΈ°λ° ν”„λ΅ νΈμ—”λ“ ν΄λΌμ΄μ–ΈνΈμ…λ‹λ‹¤.

## π€ κΈ°μ  μ¤νƒ

- **HTML5** + **CSS3** + **JavaScript (ES6+)**
- **Bootstrap 5** - UI ν”„λ μ„μ›ν¬
- **Axios** - HTTP ν΄λΌμ΄μ–ΈνΈ
- **SockJS** + **Stomp.js** - WebSocket ν†µμ‹ 
- **CDN λ°©μ‹** - λ³„λ„ λΉλ“ λ„κµ¬ μ—†μ΄ μ‹¤ν–‰ κ°€λ¥

## π“ νμΌ κµ¬μ΅°

```
frontend/
β”β”€β”€ README.md              # μ΄ νμΌ
β”β”€β”€ login.html            # λ΅κ·ΈμΈ/νμ›κ°€μ… νμ΄μ§€
β”β”€β”€ index.html            # κ²½λ§¤ λ¦¬μ¤νΈ & κ²€μƒ‰
β”β”€β”€ detail.html           # κ²½λ§¤ μƒμ„Έ & μ‹¤μ‹κ°„ μ…μ°°
β”β”€β”€ create-auction.html   # κ²½λ§¤ λ¬Όν’ λ“±λ΅
β”β”€β”€ mypage.html           # λ§μ΄νμ΄μ§€ & ν¬μΈνΈ μ¶©μ „
β”β”€β”€ chat.html             # 1:1 μ±„ν…
β””β”€β”€ js/
    β””β”€β”€ api.js            # κ³µν†µ API λ° μ ν‹Έλ¦¬ν‹° ν•¨μ
```

## π― μ£Όμ” κΈ°λ¥

### 1. λ΅κ·ΈμΈ/νμ›κ°€μ… (`login.html`)
- νμ›κ°€μ…: μ΄λ©”μΌ, λΉ„λ°€λ²νΈ, λ‹‰λ„¤μ„ μ…λ ¥
- λ΅κ·ΈμΈ: JWT ν† ν° λ°κΈ‰ λ° λ΅μ»¬μ¤ν† λ¦¬μ§€ μ €μ¥
- μλ™ λ΅κ·ΈμΈ μ²΄ν¬

### 2. κ²½λ§¤ λ¦¬μ¤νΈ (`index.html`)
- μ „μ²΄ κ²½λ§¤ λ©λ΅ ν‘μ‹ (μΉ΄λ“ ν•νƒ)
- **Elasticsearch κΈ°λ° κ²€μƒ‰**:
  - ν‚¤μ›λ“ κ²€μƒ‰
  - μΉ΄ν…κ³ λ¦¬ ν•„ν„°
  - κ°€κ²© λ²”μ„ ν•„ν„°
  - μƒνƒ ν•„ν„°
- μ‹¤μ‹κ°„ ν¬μΈνΈ μ”μ•΅ ν‘μ‹
- μΉ΄λ“ ν΄λ¦­ μ‹ μƒμ„Έ νμ΄μ§€λ΅ μ΄λ™

### 3. κ²½λ§¤ μƒμ„Έ (`detail.html`)
- κ²½λ§¤ μƒμ„Έ μ •λ³΄ ν‘μ‹
- **μ‹¤μ‹κ°„ μ…μ°° (WebSocket)**:
  - `/ws-auction` μ—°κ²°
  - `/topic/auctions/{id}` κµ¬λ…
  - λ‹¤λ¥Έ μ‚¬μ©μ μ…μ°° μ‹ μ¦‰μ‹ ν™”λ©΄ μ—…λ°μ΄νΈ
- **Redis κΈ°λ° ν¬μΈνΈ κ²€μ¦**
- μ…μ°° λ‚΄μ—­ μ‹¤μ‹κ°„ ν‘μ‹
- λ‚™μ°° ν›„ μ±„ν… λ²„νΌ ν™μ„±ν™”

### 4. κ²½λ§¤ λ¬Όν’ λ“±λ΅ (`create-auction.html`)
- νλ§¤μκ°€ κ²½λ§¤ λ¬Όν’μ„ λ“±λ΅ν•λ” νμ΄μ§€
- **μ…λ ¥ ν•­λ©**:
  - μ λ© (μµλ€ 100μ)
  - μ‹μ‘κ°€ (μµμ† 1,000μ›)
  - κ²½λ§¤ μ‹μ‘ μ‹κ°„
  - κ²½λ§¤ μΆ…λ£ μ‹κ°„
- **λΉ λ¥Έ κΈ°κ°„ μ„¤μ •**: 1μΌ/3μΌ/7μΌ/14μΌ λ²„νΌ
- **μ ν¨μ„± κ²€μ‚¬**:
  - μ‹μ‘ μ‹κ°„μ€ ν„μ¬ μ‹κ°„ μ΄ν›„
  - μΆ…λ£ μ‹κ°„μ€ μ‹μ‘ μ‹κ°„ μ΄ν›„
  - μµμ† κ²½λ§¤ κΈ°κ°„ 1μ‹κ°„ μ΄μƒ
- λ“±λ΅ ν›„ μƒμ„Έ νμ΄μ§€λ΅ μλ™ μ΄λ™

### 5. λ§μ΄νμ΄μ§€ (`mypage.html`)
- μ‚¬μ©μ μ •λ³΄ ν‘μ‹
- **ν¬μΈνΈ κ΄€λ¦¬**:
  - μ΄ ν¬μΈνΈ, μ‚¬μ© κ°€λ¥ ν¬μΈνΈ, μ‚¬μ© μ¤‘ ν¬μΈνΈ
  - ν¬μΈνΈ μ¶©μ „ (10,000 / 50,000 / 100,000 / 500,000μ›)
  - μ§μ ‘ κΈμ•΅ μ…λ ¥ μ¶©μ „
- μ…μ°°/λ‚™μ°°/νλ§¤ ν†µκ³„

### 6. 1:1 μ±„ν… (`chat.html`)
- **WebSocket κΈ°λ° μ‹¤μ‹κ°„ μ±„ν…**:
  - `/ws-chat` μ—°κ²°
  - `/topic/chat/{roomId}` κµ¬λ…
- MongoDB κΈ°λ° λ€ν™” λ‚΄μ—­ λ΅λ“
- μΉ΄μΉ΄μ¤ν†΅ μ¤νƒ€μΌ UI
- μ „μ†΅/μμ‹  λ©”μ‹μ§€ κµ¬λ¶„ ν‘μ‹

## π”§ μ„¤μ • λ° μ‹¤ν–‰

### 1. λ°±μ—”λ“ μ„λ²„ μ‹¤ν–‰

λ¨Όμ € λ°±μ—”λ“ μ„λ²„λ“¤μ΄ μ‹¤ν–‰λμ–΄ μμ–΄μ•Ό ν•©λ‹λ‹¤:

```bash
# Docker Composeλ΅ μΈν”„λΌ μ‹¤ν–‰
docker compose up -d

# κ° μ„λΉ„μ¤ μ‹¤ν–‰ (IntelliJ IDEA)
# - server-gateway (Port: 8000)
# - service-user
# - service-auction
# - service-payment
# - service-search
# - service-chat
```

### 2. Gateway URL ν™•μΈ

`frontend/js/api.js` νμΌμ—μ„ Gateway URLμ„ ν™•μΈν•μ„Έμ”:

```javascript
const API_BASE_URL = 'http://localhost:8000';
```

ν¬νΈκ°€ λ‹¤λ¥Έ κ²½μ° μμ •ν•΄μ£Όμ„Έμ”.

### 3. ν”„λ΅ νΈμ—”λ“ μ‹¤ν–‰

#### λ°©λ²• A: VS Code Live Server μ‚¬μ© (κ¶μ¥)

1. VS Codeμ— **Live Server** ν™•μ¥ ν”„λ΅κ·Έλ¨ μ„¤μΉ
2. `login.html` νμΌμ„ μ—΄κ³  μ°ν΄λ¦­ β†’ **Open with Live Server**
3. λΈλΌμ°μ €κ°€ μλ™μΌλ΅ μ—΄λ¦½λ‹λ‹¤ (λ³΄ν†µ `http://127.0.0.1:5500`)

#### λ°©λ²• B: Python HTTP Server μ‚¬μ©

```bash
cd frontend
python3 -m http.server 8000
```

λΈλΌμ°μ €μ—μ„ `http://localhost:8000/login.html` μ ‘μ†

#### λ°©λ²• C: μ§μ ‘ λΈλΌμ°μ €μ—μ„ μ—΄κΈ°

`login.html` νμΌμ„ λΈλΌμ°μ €μ—μ„ μ§μ ‘ μ—΄κΈ° (CORS μ ν•μ΄ μμ„ μ μμ)

## π“ μ‚¬μ© λ°©λ²•

### 1λ‹¨κ³„: νμ›κ°€μ… λ° λ΅κ·ΈμΈ
1. `login.html`μ—μ„ νμ›κ°€μ… νƒ­ ν΄λ¦­
2. μ΄λ©”μΌ, λΉ„λ°€λ²νΈ, λ‹‰λ„¤μ„ μ…λ ¥ ν›„ κ°€μ…
3. λ΅κ·ΈμΈ νƒ­μ—μ„ λ΅κ·ΈμΈ

### 2λ‹¨κ³„: ν¬μΈνΈ μ¶©μ „
1. μƒλ‹¨ λ„¤λΉ„κ²μ΄μ…μ "λ§μ΄νμ΄μ§€" λ²„νΌ ν΄λ¦­
2. "ν¬μΈνΈ μ¶©μ „" λ²„νΌ ν΄λ¦­
3. μ›ν•λ” κΈμ•΅ μ„ νƒ λλ” μ§μ ‘ μ…λ ¥

### 3λ‹¨κ³„: κ²½λ§¤ λ¬Όν’ λ“±λ΅ (νλ§¤μ)
1. μƒλ‹¨ λ„¤λΉ„κ²μ΄μ…μ "λ¬Όν’ λ“±λ΅" λ²„νΌ ν΄λ¦­
2. μ λ©, μ‹μ‘κ°€, κ²½λ§¤ μ‹μ‘/μΆ…λ£ μ‹κ°„ μ…λ ¥
3. "κ²½λ§¤ λ“±λ΅ν•κΈ°" λ²„νΌ ν΄λ¦­
4. λ“±λ΅ μ™„λ£ ν›„ μλ™μΌλ΅ μƒμ„Έ νμ΄μ§€λ΅ μ΄λ™

### 4λ‹¨κ³„: κ²½λ§¤ κ²€μƒ‰ λ° μ…μ°° (κµ¬λ§¤μ)
1. λ©”μΈ νμ΄μ§€μ—μ„ κ²½λ§¤ κ²€μƒ‰
2. κ΄€μ‹¬ μλ” κ²½λ§¤ μΉ΄λ“ ν΄λ¦­
3. μ…μ°° κΈμ•΅ μ…λ ¥ ν›„ "μ…μ°°ν•κΈ°" λ²„νΌ ν΄λ¦­
4. μ‹¤μ‹κ°„μΌλ΅ λ‹¤λ¥Έ μ‚¬μ©μμ μ…μ°° ν™•μΈ κ°€λ¥

### 5λ‹¨κ³„: μ±„ν…
1. λ‚™μ°°λ κ²½λ§¤ μƒμ„Έ νμ΄μ§€μ—μ„ "1:1 μ±„ν…ν•κΈ°" λ²„νΌ ν΄λ¦­
2. νλ§¤μμ™€ μ‹¤μ‹κ°„ μ±„ν…

## π¨ μ£Όμ” κΈ°λ¥ μ‹μ—°

### JWT μΈμ¦
- λ΅κ·ΈμΈ μ‹ `accessToken`κ³Ό `refreshToken`μ„ λ΅μ»¬μ¤ν† λ¦¬μ§€μ— μ €μ¥
- λ¨λ“  API μ”μ²­μ— `Authorization: Bearer {token}` ν—¤λ” μλ™ μ¶”κ°€ (Axios Interceptor)
- ν† ν° λ§λ£ μ‹ μλ™μΌλ΅ λ΅κ·ΈμΈ νμ΄μ§€λ΅ μ΄λ™

### WebSocket μ‹¤μ‹κ°„ ν†µμ‹ 
- **κ²½λ§¤ μ…μ°°**: SockJS + Stomp.jsλ΅ μ‹¤μ‹κ°„ κ°€κ²© μ—…λ°μ΄νΈ
- **μ±„ν…**: MongoDB μ €μ¥ + WebSocketμΌλ΅ μ‹¤μ‹κ°„ λ©”μ‹μ§€ μ „μ†΅/μμ‹ 

### Elasticsearch κ²€μƒ‰
- ν‚¤μ›λ“, μΉ΄ν…κ³ λ¦¬, κ°€κ²© λ²”μ„, μƒνƒλ΅ λ³µν•© κ²€μƒ‰
- κ²€μƒ‰ κ²°κ³Ό ν•μ΄λΌμ΄ν…

### Redis μΊμ‹±
- ν¬μΈνΈ κ²€μ¦: Redisμ—μ„ λΉ λ¥΄κ² ν¬μΈνΈ μ²΄ν¬
- νλ§¤μ μ •λ³΄ μΊμ‹±: μμ£Ό μ΅°νλλ” λ°μ΄ν„° μ„±λ¥ μµμ ν™”

## π” λ³΄μ•

- JWT ν† ν° κΈ°λ° μΈμ¦
- Bearer Token λ°©μ‹
- CORS μ„¤μ •μΌλ΅ ν—μ©λ λ„λ©”μΈλ§ μ ‘κ·Ό
- XSS λ°©μ§€λ¥Ό μ„ν• HTML μ΄μ¤μΌ€μ΄ν”„

## π› νΈλ¬λΈ”μν…

### CORS μ—λ¬ λ°μƒ μ‹
λ°±μ—”λ“ Gatewayμ CORS μ„¤μ •μ„ ν™•μΈν•μ„Έμ”:
```kotlin
// server-gateway/src/main/kotlin/.../config/CorsConfig.kt
allowedOriginPatterns = listOf("*")  // κ°λ° ν™κ²½μ©
```

### WebSocket μ—°κ²° μ‹¤ν¨ μ‹
1. Gateway μ„λ²„κ°€ μ‹¤ν–‰ μ¤‘μΈμ§€ ν™•μΈ
2. WebSocket μ—”λ“ν¬μΈνΈ ν™•μΈ: `/ws-auction`, `/ws-chat`
3. λΈλΌμ°μ € μ½μ†”μ—μ„ μ—λ¬ λ©”μ‹μ§€ ν™•μΈ

### ν¬μΈνΈ μ¶©μ „μ΄ μ• λ  λ•
1. λ΅κ·ΈμΈ μƒνƒ ν™•μΈ
2. λ°±μ—”λ“ `service-user` μ„λ²„ μ‹¤ν–‰ ν™•μΈ
3. API μ‘λ‹µ ν™•μΈ (κ°λ°μ λ„κµ¬ Network νƒ­)

## π“– API μ—”λ“ν¬μΈνΈ

λ¨λ“  APIλ” Gateway(`http://localhost:8000`)λ¥Ό ν†µν•΄ νΈμ¶λ©λ‹λ‹¤.

### Auth
- `POST /api/v1/auth/signup` - νμ›κ°€μ…
- `POST /api/v1/auth/login` - λ΅κ·ΈμΈ
- `POST /api/v1/auth/reissue` - ν† ν° μ¬λ°κΈ‰

### User
- `GET /api/v1/users/{userId}` - μ‚¬μ©μ μ •λ³΄ μ΅°ν
- `POST /api/v1/users/{userId}/points/charge` - ν¬μΈνΈ μ¶©μ „

### Auction
- `GET /api/v1/auctions` - κ²½λ§¤ λ©λ΅
- `GET /api/v1/auctions/{id}` - κ²½λ§¤ μƒμ„Έ
- `GET /api/v1/auctions/{id}/current-price` - ν„μ¬κ°€ μ΅°ν
- `POST /api/v1/auctions/{id}/bid` - μ…μ°°
- `POST /api/v1/seller/auctions` - κ²½λ§¤ λ¬Όν’ λ“±λ΅ (νλ§¤μ)
- `DELETE /api/v1/seller/auctions/{id}` - κ²½λ§¤ λ¬Όν’ μ‚­μ  (νλ§¤μ)

### Search
- `GET /api/v1/search/auctions` - κ²½λ§¤ κ²€μƒ‰ (Elasticsearch)

### Chat
- `GET /api/v1/chat/rooms` - μ±„ν…λ°© λ©λ΅
- `POST /api/v1/chat/rooms` - μ±„ν…λ°© μƒμ„±
- `GET /api/v1/chat/rooms/{roomId}/messages` - μ±„ν… λ‚΄μ—­

## π“ λ¬Έμ

λ¬Έμ κ°€ λ°μƒν•κ±°λ‚ κ°μ„  μ μ•μ΄ μμΌμ‹λ©΄ μ΄μλ¥Ό λ“±λ΅ν•΄μ£Όμ„Έμ”!

---

**Β© 2025 Auction System - ChPark**

